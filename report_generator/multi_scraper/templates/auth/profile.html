{% extends 'auth/base.html' %}
{% block content %}
<div class="app-layout">
  <aside class="sidebar">
    <div class="sidebar-brand"><div class="logo-icon">SQ</div>
      {% if session.role == 'admin' %}Admin{% else %}Researcher{% endif %}
    </div>
    <nav class="sidebar-nav">
      {% if session.role == 'admin' %}
        <a href="{{ url_for('admin_dashboard') }}"><span class="nav-icon">ğŸ </span> Dashboard</a>
        <a href="{{ url_for('admin_submissions') }}"><span class="nav-icon">ğŸ“‹</span> Submissions</a>
        <a href="{{ url_for('admin_researchers') }}"><span class="nav-icon">ğŸ‘¥</span> Researchers</a>
        <a href="{{ url_for('tool') }}"><span class="nav-icon">ğŸ”¬</span> Research Tool</a>
      {% else %}
        <a href="{{ url_for('researcher_dashboard') }}"><span class="nav-icon">ğŸ </span> Dashboard</a>
        <a href="{{ url_for('researcher_submissions') }}"><span class="nav-icon">ğŸ“‹</span> My Submissions</a>
        <a href="{{ url_for('tool') }}"><span class="nav-icon">ğŸ”¬</span> Research Tool</a>
      {% endif %}
      <hr class="sidebar-divider">
      <a href="{{ url_for('profile') }}" class="active"><span class="nav-icon">ğŸ‘¤</span> Profile</a>
      <a href="{{ url_for('logout') }}"><span class="nav-icon">ğŸšª</span> Logout</a>
    </nav>
  </aside>

  <main class="main-content">
    <div class="hero-card">
      <h3>My Profile</h3>
      <p>Manage your account information and security settings.</p>
    </div>

    <div class="card">
      <div class="card-header">
        <h4 class="card-title">Account Information</h4>
        <span class="badge badge-info">{{ user.role|upper }}</span>
      </div>
      <div class="info-grid">
        <div class="info-item">
          <h5>Username</h5>
          <p>{{ user.username }}</p>
        </div>
        <div class="info-item">
          <h5>Role</h5>
          <p>{{ user.role|upper }}</p>
        </div>
        <div class="info-item">
          <h5>Created By</h5>
          <p>{{ user.created_by or 'â€”' }}</p>
        </div>
        <div class="info-item">
          <h5>Created At</h5>
          <p><span class="ts">{{ user.created_at or 'â€”' }}</span></p>
        </div>
        <div class="info-item">
          <h5>Last Login</h5>
          <p><span class="ts">{{ user.last_login or 'â€”' }}</span></p>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h4 class="card-title">Change Password</h4>
      </div>
      <form method="POST" action="{{ url_for('change_password') }}" style="max-width:420px">
        <div class="form-group">
          <label class="form-label">Current Password</label>
          <input type="password" name="current_password" class="form-control" required placeholder="Enter current password">
        </div>
        <div class="form-group">
          <label class="form-label">New Password</label>
          <input type="password" name="new_password" class="form-control" required placeholder="At least 6 characters">
        </div>
        <div class="form-group">
          <label class="form-label">Confirm New Password</label>
          <input type="password" name="confirm_password" class="form-control" required placeholder="Repeat new password">
        </div>
        <button type="submit" class="btn btn-primary">ğŸ”’ Update Password</button>
      </form>
    </div>
  </main>
</div>
{% endblock %}